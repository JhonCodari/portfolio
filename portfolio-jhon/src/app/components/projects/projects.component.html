<section class="projects-section">
  <div class="container">
    <div class="section-header" [@fadeIn]>
      <h2 class="section-title">üíº Projetos & Portfolio</h2>
      <p class="section-subtitle">
        Alguns dos principais projetos que desenvolvi, aplicando diferentes tecnologias e metodologias de desenvolvimento:
      </p>
    </div>

    <div class="featured-section" [@fadeIn] *ngIf="!isLoading && getFeaturedProjects().length > 0">
      <h3 class="featured-title">‚≠ê Projetos em Destaque</h3>
      <div class="featured-grid">
        <app-project-card
          *ngFor="let project of getFeaturedProjects(); let i = index; trackBy: trackByProject"
          [project]="project"
          [style.animation-delay]="i * 0.1 + 's'"
          [animationDelay]="i * 100"
          [@scaleIn]>
        </app-project-card>
      </div>
    </div>

    <div class="filters-header" *ngIf="!isLoading">
      <div class="results-info">
        <i class="fas fa-filter"></i>
        <span>{{ getFilteredCount() }} projeto(s) encontrado(s)</span>
      </div>

      <button class="toggle-filters-btn" (click)="toggleFilters()">
        <i [class]="showFilters ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
        {{ showFilters ? 'Ocultar' : 'Mostrar' }} Filtros
      </button>
    </div>

    <div class="filters-container" [class.visible]="showFilters" *ngIf="!isLoading">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input
          type="text"
          placeholder="Buscar por projeto, tecnologia..."
          [value]="searchTerm"
          (input)="onSearchChange($event)"
        >
      </div>

      <div class="filter-group">
        <label>
          <i class="fas fa-sort"></i>
          Ordenar:
        </label>
        <select [value]="sortBy" (change)="onSortChange($any($event.target).value)">
          <option value="date">Mais Recente</option>
          <option value="name">Nome (A-Z)</option>
        </select>
      </div>

      <button class="clear-filters-btn" (click)="clearFilters()" *ngIf="selectedCategory !== 'all' || searchTerm !== ''">
        <i class="fas fa-times"></i>
        Limpar Filtros
      </button>
    </div>

    <div [@fadeIn] *ngIf="!isLoading">
      <app-category-filters
        [categories]="categories"
        [selectedCategory]="selectedCategory"
        [allCategoryLabel]="'üåü Todos os Projetos'"
        (categoryChange)="setCategory($event)">
      </app-category-filters>
    </div>

    <div class="projects-grid" [@fadeIn] *ngIf="!isLoading && filteredProjects.length > 0">
      <app-project-card
        *ngFor="let project of filteredProjects; let i = index; trackBy: trackByProject"
        [project]="project"
        [style.animation-delay]="i * 0.05 + 's'"
        [animationDelay]="i * 100"
        [@scaleIn]>
      </app-project-card>
    </div>

    <div class="projects-grid skeleton-grid" *ngIf="isLoading">
      <div class="skeleton-project-card" *ngFor="let item of [1, 2, 3, 4, 5, 6]"></div>
    </div>

    <div class="empty-state" *ngIf="!isLoading && filteredProjects.length === 0" [@fadeIn]>
      <div class="empty-icon">üìÇ</div>
      <h3 class="empty-title">Nenhum projeto encontrado</h3>
      <p class="empty-description">
        N√£o h√° projetos que correspondam aos filtros aplicados. Tente ajustar sua busca ou filtros.
      </p>
      <button class="empty-button" (click)="clearFilters()">
        Limpar Filtros
      </button>
    </div>

  </div>
</section>
